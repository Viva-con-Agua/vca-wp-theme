<?php

/**
 * Video Block Template.
 *
 * @param   array $block The block settings and attributes.
 * @param   string $content The block inner HTML (empty).
 * @param   bool $is_preview True during AJAX preview.
 * @param   (int|string) $post_id The post ID this block is saved to.
 */

// Create id attribute allowing for custom "anchor" value.
$id = 'videoBlock-' . $block['id'];
if( !empty($block['anchor']) ) {
    $id = $block['anchor'];
}

// Create class attribute allowing for custom "className" and "align" values.
$className = 'videoBlock';
if( !empty($block['className']) ) {
    $className .= ' ' . $block['className'];
}
if( !empty($block['align']) ) {
    $className .= ' align' . $block['align'];
}

// Load values and assign defaults.
$videoType = get_field('videoType');
$youtubeLink = get_field('youtubeLink');
$videoMp4 = get_field('videoMp4');
$posterImg = get_field('posterImg');

if ($videoType === 'youtube') {
    $srcUrl = convertYoutube($youtubeLink);
} else {
    $srcUrl = $videoMp4['url'];
}

if (isset($youtubeLink) && $youtubeLink !== '' || isset($videoMp4) && $videoMp4 !== '') {
?>
    <div id="<?php echo esc_attr($id); ?>" class="<?php echo esc_attr($className); ?>">
        <div class="video-container">
            <div class="posterImg" data-type="<?php echo $videoType; ?>" data-url="<?php echo $srcUrl; ?>" style="background-image: url(<?php echo $posterImg['sizes']['medium']; ?>);">
                <svg xmlns="http://www.w3.org/2000/svg" width="56" height="56" viewBox="0 0 56 56">
                    <path d="M-15951.913-616.378c-.26,0-.523-.012-.778-.023h-.016c-.172-.008-.35-.016-.524-.02-.427-.008-.871-.026-1.359-.056-.189-.012-.381-.041-.565-.068a5.114,5.114,0,0,0-.75-.075c-.062,0-.122,0-.18.007-.279.022-.557.024-.816.024h-.23l-.281,0a8.718,8.718,0,0,0-.886.038,10.409,10.409,0,0,1-1.052.054c-.2,0-.4-.006-.6-.018-.825-.047-1.7-.069-2.759-.069-.8,0-1.618.013-2.407.025h-.033l-.724.011c-.395.006-.792.009-1.176.012-.691.006-1.406.011-2.112.032h-.033a2.141,2.141,0,0,1-.34-.037l-.039-.006a2.027,2.027,0,0,0-.286-.028.86.86,0,0,0-.1.005l-.218.023c-.458.048-.933.1-1.4.126-.2.014-.41.027-.625.027a3.739,3.739,0,0,1-.742-.067,1.563,1.563,0,0,0-.311-.027c-.079,0-.163,0-.23.007l-.07,0h-.011c-.062,0-.124.006-.186.006h-.062c-.047,0-.095-.005-.146-.005-.118,0-.234.009-.348.017-.159.014-.289.02-.412.02a1.348,1.348,0,0,1-.646-.156l-.044-.023a.4.4,0,0,0-.178-.062l-.023,0a1.049,1.049,0,0,1-.144.01,2.021,2.021,0,0,1-.883-.27.427.427,0,0,0-.2-.043l-.075,0h-.057a.748.748,0,0,1-.61-.305,3.9,3.9,0,0,0-.316-.327l0,0a3.655,3.655,0,0,1-.357-.378,3.793,3.793,0,0,1-.461-2.366c.056-1.313.12-2.645.192-3.958.019-.331.065-.642.107-.917.032-.215.066-.444.089-.679a.449.449,0,0,1,.135-.309l.018-.02c.094-.114.1-.226.036-.441a1.883,1.883,0,0,0-.148-.373,2.259,2.259,0,0,1-.208-.918c-.006-.078-.011-.157-.017-.236l-.007-.107v-.01c-.006-.107-.013-.214-.021-.32a5.025,5.025,0,0,0-.128-.962,2.462,2.462,0,0,1-.036-1.043,13.283,13.283,0,0,0,.092-2.571c0-.024,0-.044,0-.063s0-.041,0-.061c-.02-1.26.064-1.326.377-1.572.107-.085.217-.181.357-.313a.358.358,0,0,0,.023-.405c-.018-.038-.035-.073-.054-.107l-.013-.025a1.314,1.314,0,0,1-.094-.2,5.255,5.255,0,0,1-.225-1.311c-.032-.337-.042-.687-.052-1.025v-.015l0-.143c-.012-.321-.032-.637-.061-.966a1.974,1.974,0,0,1,.124-1.051.659.659,0,0,0,.057-.357c-.007-.109-.013-.22-.018-.332a6.981,6.981,0,0,0-.066-.8c-.065-.36-.106-.75-.146-1.126l0-.015,0-.015c-.037-.359-.076-.729-.136-1.073a5.892,5.892,0,0,1-.072-1.015c0-.663.011-1.336.021-1.987l0-.1v-.071c.013-.775.025-1.577.021-2.367a2.291,2.291,0,0,1,.085-.658,1.064,1.064,0,0,0,0-.594,1.866,1.866,0,0,0-.125-.361,4.111,4.111,0,0,1-.28-1.556c-.007-.383-.016-.859-.016-1.311,0-.214-.014-.413-.029-.633l0-.045a23.643,23.643,0,0,1,.008-3.746c.015-.226.046-.441.076-.649l0-.028a1.282,1.282,0,0,1,.309-.811c.092-.074.185-.167.275-.256l.008-.008c.033-.034.067-.068.1-.1a.31.31,0,0,0,.044-.325,10.662,10.662,0,0,1-.33-2.637v-.019l0-.051,0-.061c0-.021,0-.041,0-.062v-.033c-.006-.13-.011-.252-.022-.377a13.219,13.219,0,0,1,0-2.025c.044-.6.031-1.229.02-1.836v-.019c0-.063,0-.127,0-.19l0-.189a3.6,3.6,0,0,1,.184-1.428c.239-.615.508-.789.763-.886a.46.46,0,0,1,.171-.03,1.255,1.255,0,0,1,.188.019,1.265,1.265,0,0,0,.187.019c.626,0,1.262,0,1.877.01h.03c.594,0,1.266.01,1.909.01.9,0,1.648-.01,2.348-.032.792-.028,1.572-.031,2.163-.031l.976,0h.526l1.007,0c.65,0,1.507,0,2.366-.035.816-.031,1.633-.035,2.254-.035l.959,0h.249c.452,0,.92.006,1.381.006.838,0,1.52-.011,2.146-.034s1.233-.025,1.834-.026c.577,0,1.171,0,1.755-.023.7-.027,1.426-.075,2.218-.148.181-.016.365-.017.543-.019a3.922,3.922,0,0,0,.993-.094,6,6,0,0,1,1.574-.144h.086c.271,0,.55,0,.822-.016.093-.006.187-.018.277-.03a3.374,3.374,0,0,1,.419-.035,1.412,1.412,0,0,1,.158.008,1.462,1.462,0,0,0,.169.009,3.548,3.548,0,0,0,.412-.032l.044-.005a3.121,3.121,0,0,1,.435-.038l.079,0c.017,0,.028-.009.04-.028h.229a1.143,1.143,0,0,0,.354.064.752.752,0,0,0,.308-.064h.269a.683.683,0,0,0,.31.066,1.542,1.542,0,0,0,.159-.01,3.494,3.494,0,0,1,.431-.026c.138,0,.277.007.428.022a2.794,2.794,0,0,0,.3.014c.1,0,.207,0,.309-.008l.067,0c.1,0,.2,0,.31,0,.348,0,.7.011,1.039.022.275.009.561.018.841.021.714,0,1.291.026,1.816.068l.324.023c.38.026.772.053,1.164.1.114.012.231.028.345.044l.014,0a5.477,5.477,0,0,0,.744.069,2.263,2.263,0,0,0,.261-.014,4.759,4.759,0,0,1,.626-.034l.208,0a7.363,7.363,0,0,0,.838-.032,3.9,3.9,0,0,1,.53-.03l.188,0h.154a4.6,4.6,0,0,0,.544-.024,6.208,6.208,0,0,1,.862-.04l.215,0a5.1,5.1,0,0,0,.607-.03,4.184,4.184,0,0,1,.586-.034l.2,0c.225,0,.457,0,.687-.02.16-.016.327-.016.489-.016h.116a3.222,3.222,0,0,0,.529-.032.421.421,0,0,1,.08-.008.467.467,0,0,1,.364.217.22.22,0,0,0,.188.088l.054,0h.035l.085,0a.775.775,0,0,1,.528.183,1.64,1.64,0,0,1,.405,1.143.633.633,0,0,0,.112.361,8.084,8.084,0,0,1,.479.726l.008.013.007.011a3.919,3.919,0,0,1,.369,1.937c0,.535.008,1.088-.013,1.64-.019.489,0,.989.011,1.473v.02c0,.147.009.293.013.439.021.684.006,1.373-.007,2.04v.029c0,.124-.006.247-.008.37a.331.331,0,0,1-.013.116,2.273,2.273,0,0,0-.053.829l0,.1c.013.323.007.648,0,.95,0,.24-.047.391-.128.449l-.023.016-.019.014a.429.429,0,0,1-.159.086.055.055,0,0,0-.04.026.232.232,0,0,0,.008.178,2.9,2.9,0,0,1,.112.754,1.221,1.221,0,0,0,.093.445,2.435,2.435,0,0,1,.164,1.031c0,.156,0,.311,0,.467v.036c0,.439.011.893-.01,1.342-.007.209.006.423.017.612l0,.069a18.371,18.371,0,0,1-.041,2.22c-.01.157-.019.314-.027.47,0,.106-.008.212-.011.319v.009c0,.145-.008.295-.018.442a.832.832,0,0,0,.08.441,1.2,1.2,0,0,1,.08.93c-.021.1-.037.2-.048.293-.037.3-.026.392.064.541a2.893,2.893,0,0,1,.244.589.74.74,0,0,1,0,.477,4.1,4.1,0,0,0-.092,1.753,15.661,15.661,0,0,1,.1,2.234,3.975,3.975,0,0,0,.072.938,3.561,3.561,0,0,1,.059.655l.006.183c.04,1.181.078,2.556.028,3.926a4.915,4.915,0,0,1-.152,1.151,1.437,1.437,0,0,0-.057.345c-.052.93-.162,1.258-.493,1.464-.1.064-.213.12-.318.174l-.139.071-.009,0-.014.006a.429.429,0,0,0-.142.109.8.8,0,0,0,.3.249,1.783,1.783,0,0,0,.185.054,1.088,1.088,0,0,1,.328.122.733.733,0,0,1,.188.172c.18.216.205.331.193.886,0,.257.011.513.024.76v.022c.009.167.018.33.022.494l0,.181v.008a9.4,9.4,0,0,1-.053,1.659.628.628,0,0,0,.016.3.975.975,0,0,1,.036.461c-.021.245-.047.493-.071.733l0,.017c-.018.169-.034.339-.051.509-.032.324-.058.677-.08,1.111a1.047,1.047,0,0,0,.107.662,1.276,1.276,0,0,1,.138.4l0,.014.021.088a13.051,13.051,0,0,1,.341,3.1v.031c0,.01,0,.021,0,.031a.733.733,0,0,0,.013.2v1.913a2.118,2.118,0,0,0-.015.306c0,.067,0,.145-.006.223-.028.441-.1.653-.236.71a1.332,1.332,0,0,0-.4.339,1.3,1.3,0,0,1-.907.546.676.676,0,0,1-.093-.006,2.147,2.147,0,0,0-.3-.018c-.092,0-.187,0-.271.007h-.006c-.07,0-.141.006-.211.007a.992.992,0,0,1-.453-.092.32.32,0,0,0-.148-.035.84.84,0,0,0-.232.046,1.094,1.094,0,0,1-.192.045.557.557,0,0,0-.072.016.363.363,0,0,1-.1.017h-.021c-.03,0-.062,0-.095,0a2.437,2.437,0,0,0-.639.118l-.01,0c-.116.032-.237.066-.355.088-.224.042-.445.1-.661.15l-.237.058a8.056,8.056,0,0,1-1.943.2c-.178,0-.367,0-.595-.009-.836-.024-1.719-.035-2.778-.035-.854,0-1.723.007-2.562.015l-.534,0c-.267,0-.534.006-.8.01-.411.006-.837.012-1.257.012-.3,0-.577,0-.834-.01-.64-.016-1.336-.024-2.131-.024-.7,0-1.416.006-2.106.012h-.63c-.3,0-.656,0-1.008.03-.153.011-.308.012-.452.012h-.226l-.224,0c-.168,0-.315,0-.45.014-.34.022-.687.024-1.024.026l-.255,0h-2.2C-15951.754-616.379-15951.831-616.378-15951.913-616.378Zm-9.349-40a1.883,1.883,0,0,0-1.493.769c-.433.521-.242,2.883-.058,5.168a14.545,14.545,0,0,1,.058,4.132,46.622,46.622,0,0,0,.189,6.69,52.138,52.138,0,0,0,.7,6.741,1.976,1.976,0,0,0,1.745,1.095,2.456,2.456,0,0,0,.938-.2.754.754,0,0,1,.3-.049,4.2,4.2,0,0,1,.563.057,3.894,3.894,0,0,0,.578.062.709.709,0,0,0,.348-.07c1.692-.993,3.073-1.711,4.409-2.4l.006,0c1.705-.886,3.316-1.722,5.421-3.047l.008,0a57.131,57.131,0,0,0,5.125-3.547c2.188-1.758,3.275-3.176,3.232-4.213-.054-1.643-4.034-3.516-6.94-4.883l-.021-.01c-.507-.238-.985-.463-1.4-.669-.967-.476-1.973-.868-2.944-1.247a32.842,32.842,0,0,1-3.315-1.436,14.46,14.46,0,0,0-2.482-.959,11.921,11.921,0,0,1-2.883-1.2A4.1,4.1,0,0,0-15961.262-656.379Z" transform="translate(15979.517 671.878)" fill="#fff" stroke="rgba(0,0,0,0)" stroke-miterlimit="10" stroke-width="1"/>
                </svg>
            </div>
        </div>
    </div>
<?php } ?>
